# GitLab CI/CD é…ç½®æ–‡ä»¶è¯´æ˜

## å½“å‰ä½¿ç”¨çš„é…ç½®

### ğŸ¯ `.gitlab-ci.yml` 
**å½“å‰æ´»è·ƒçš„ CI/CD é…ç½®**
- **ç±»å‹**: GitLab Runner + Docker Socket
- **ç‰¹ç‚¹**: 
  - ä½¿ç”¨è‡ªæ‰˜ç®¡ GitLab Runner
  - ç›´æ¥ä½¿ç”¨å®¿ä¸»æœº Docker socket (`/var/run/docker.sock`)
  - é¿å…äº† Docker-in-Docker çš„æƒé™é—®é¢˜
  - éƒ¨ç½²åˆ°æŒä¹…ç›®å½• `/tmp/team9-deploy/staging`
- **çŠ¶æ€**: âœ… æ­£åœ¨ä½¿ç”¨ï¼ŒPipeline å¯ä»¥æˆåŠŸè¿è¡Œ

## å½’æ¡£çš„é…ç½®æ–‡ä»¶

### ğŸ“ `backup/ci-configs/` ç›®å½•è¯´æ˜

| æ–‡ä»¶å | æè¿° | çŠ¶æ€ |
|--------|------|------|
| `gitlab-ci-current.yml` | å½“å‰é…ç½®çš„å¤‡ä»½ | ğŸ“‹ å¤‡ä»½ |
| `.gitlab-ci-standard.yml` | æœ€åˆçš„æ ‡å‡†é…ç½®ï¼Œä½¿ç”¨ DinD | âŒ æœ‰æƒé™é—®é¢˜ |
| `.gitlab-ci-ssh-backup.yml` | SSH è¿œç¨‹éƒ¨ç½²æ–¹å¼ | ğŸ”§ å¯ç”¨ä½†å¤æ‚ |
| `.gitlab-ci-runner.yml` | GitLab Runner åŸå§‹ç‰ˆæœ¬ | âš ï¸ æœ‰æ„å»ºé—®é¢˜ |
| `.gitlab-ci-clean.yml` | æ¸…ç†åçš„é…ç½®ç‰ˆæœ¬ | ğŸ“ è¯­æ³•ä¿®å¤ç‰ˆ |
| `.gitlab-ci-backup2.yml` | ä¸´æ—¶å¤‡ä»½ç‰ˆæœ¬ | ğŸ’¾ å¤‡ä»½ |

## é…ç½®æ¼”è¿›å†å²

1. **SSH è¿œç¨‹éƒ¨ç½²** â†’ éœ€è¦ SSH å¯†é’¥ç®¡ç†ï¼Œè¾ƒå¤æ‚
2. **Docker-in-Docker (DinD)** â†’ æƒé™é—®é¢˜ï¼Œå®¹å™¨å¯åŠ¨å¤±è´¥
3. **GitLab Runner + Docker Socket** â†’ âœ… å½“å‰æ–¹æ¡ˆï¼Œç¨³å®šå¯é 

## æ¨èåšæ³•

- **ä¿ç•™**: åªéœ€è¦å…³æ³¨ `.gitlab-ci.yml`
- **å¤‡ä»½**: æ‰€æœ‰å†å²é…ç½®å·²å½’æ¡£åˆ° `backup/ci-configs/`
- **å›æ»š**: å¦‚éœ€å›æ»šï¼Œå¯ä»å¤‡ä»½ç›®å½•å¤åˆ¶é…ç½®æ–‡ä»¶

## ä¸‹ä¸€æ­¥

å¦‚æœå½“å‰é…ç½®å·¥ä½œæ­£å¸¸ï¼Œå¯ä»¥è€ƒè™‘åˆ é™¤å¤‡ä»½æ–‡ä»¶æ¥ä¿æŒé¡¹ç›®æ•´æ´ï¼š

```bash
# å¦‚æœç¡®è®¤ä¸éœ€è¦å†å²é…ç½®
rm -rf backup/ci-configs/
```

---
*æœ€åæ›´æ–°: 2025-07-09*
